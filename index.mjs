// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/buffer-from-string@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-copy@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-inherit@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/buffer-ctor@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-property@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-next-tick@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-number@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";function m(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}var h="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function f(){throw new Error("setTimeout has not been defined")}function b(){throw new Error("clearTimeout has not been defined")}var g=f,j=b;function v(e){if(g===setTimeout)return setTimeout(e,0);if((g===f||!g)&&setTimeout)return g=setTimeout,setTimeout(e,0);try{return g(e,0)}catch(t){try{return g.call(null,e,0)}catch(t){return g.call(this,e,0)}}}"function"==typeof h.setTimeout&&(g=setTimeout),"function"==typeof h.clearTimeout&&(j=clearTimeout);var w,y=[],_=!1,x=-1;function T(){_&&w&&(_=!1,w.length?y=w.concat(y):x=-1,y.length&&O())}function O(){if(!_){var e=v(T);_=!0;for(var t=y.length;t;){for(w=y,y=[];++x<t;)w&&w[x].run();x=-1,t=y.length}w=null,_=!1,function(e){if(j===clearTimeout)return clearTimeout(e);if((j===b||!j)&&clearTimeout)return j=clearTimeout,clearTimeout(e);try{j(e)}catch(t){try{return j.call(null,e)}catch(t){return j.call(this,e)}}}(e)}}function M(e,t){this.fun=e,this.array=t}M.prototype.run=function(){this.fun.apply(null,this.array)};function E(){}var k=E,P=E,S=E,W=E,q=E,D=E,H=E;var R=h.performance||{},A=R.now||R.mozNow||R.msNow||R.oNow||R.webkitNow||function(){return(new Date).getTime()};var N=new Date;var L={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];y.push(new M(e,t)),1!==y.length||_||v(O)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:k,addListener:P,once:S,off:W,removeListener:q,removeAllListeners:D,emit:H,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*A.call(R),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-N)/1e3}},z=require("stream");"disable"===L.env.READABLE_STREAM&&z?(module.exports=z,exports=module.exports=z.Readable,exports.Readable=z.Readable,exports.Writable=z.Writable,exports.Duplex=z.Duplex,exports.Transform=z.Transform,exports.PassThrough=z.PassThrough,exports.Stream=z):(exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=z||exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js"));var C=m(Object.freeze({__proto__:null})),V={objectMode:!1,encoding:null,allowHalfOpen:!1,readableObjectMode:!1,sep:"\n"},J=a,B=l,F=d.isPrimitive,I=u.isPrimitive,G=p.isPrimitive,K=c;var Q=function(e,t){return J(t)?B(t,"sep")&&(e.sep=t.sep,!G(e.sep))?new TypeError(K("invalid option. `%s` option must be a string. Option: `%s`.","sep",e.sep)):B(t,"objectMode")&&(e.objectMode=t.objectMode,!F(e.objectMode))?new TypeError(K("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):B(t,"readableObjectMode")&&(e.readableObjectMode=t.readableObjectMode,!F(e.readableObjectMode))?new TypeError(K("invalid option. `%s` option must be a boolean. Option: `%s`.","readableObjectMode",e.readableObjectMode)):B(t,"encoding")&&(e.encoding=t.encoding,!G(e.encoding))?new TypeError(K("invalid option. `%s` option must be a string. Option: `%s`.","encoding",e.encoding)):B(t,"allowHalfOpen")&&(e.allowHalfOpen=t.allowHalfOpen,!F(e.allowHalfOpen))?new TypeError(K("invalid option. `%s` option must be a boolean. Option: `%s`.","allowHalfOpen",e.allowHalfOpen)):B(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!I(e.highWaterMark))?new TypeError(K("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):null:new TypeError(K("invalid argument. Options argument must be an object. Value: `%s`.",t))};module.exports=void 0!==L&&"renderer"===L.type?require("./browser.js"):require("./node.js");var U=m(Object.freeze({__proto__:null}))("join-stream"),X=C.Transform,Y=t,Z=r,$=o,ee=i,te=e,re=s,ne=V,oe=Q,ie=U;function se(e){var t,r;if(!(this instanceof se))return arguments.length?new se(e):new se;if(t=Z(ne),arguments.length&&(r=oe(t,e)))throw r;return t.writableObjectMode=!0,t.decodeStrings=!1,ie("Creating a transform stream configured with the following options: %s.",JSON.stringify(t)),X.call(this,t),ee(this,"_destroyed",!1),te(this,"_encoding",null===t.encoding?"utf8":t.encoding),"utf8"!==this._encoding&&(t.sep=Y(t.sep,this._encoding)),te(this,"_sep",t.sep),ee(this,"_init",!1),ee(this,"_idx",-1),this}n(se,X),te(se.prototype,"_transform",(function(e,t,r){var n;this._idx+=1,ie("Received a new chunk. Chunk: %s. Encoding: %s. Index: %d.",e.toString(),t,this._idx),"utf8"===this._encoding?this._init?e=this._sep+e:this._init=!0:this._init?(e=new $(e,t),n=this._sep.length+e.length,e=(e=$.concat([this._sep,e],n)).toString(this._encoding)):this._init=!0,this.push(e,this._encoding),r()})),te(se.prototype,"_flush",(function(e){ie("Flushing the stream..."),e()})),te(se.prototype,"destroy",(function(e){var t;return this._destroyed?(ie("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,re((function(){e&&(ie("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));ie("Closing the stream..."),t.emit("close")})),this)}));var ae=a,le=c,de=r,ue=se;var pe=a,ce=c,me=r,he=se;var fe=e,be=se,ge=function(e){var t;if(arguments.length){if(!ae(e))throw new TypeError(le("invalid argument. Options argument must be an object. Value: `%s`.",e));t=de(e)}else t={};return t.objectMode=!0,new ue(t)},je=function(e){var t;if(arguments.length){if(!pe(e))throw new TypeError(ce("invalid argument. Options argument must be an object. Value: `%s`.",e));t=me(e)}else t={};return r;function r(){return new he(t)}};fe(be,"objectMode",ge),fe(be,"factory",je);var ve=be;export{ve as default,je as factory,ge as objectMode};
//# sourceMappingURL=index.mjs.map
